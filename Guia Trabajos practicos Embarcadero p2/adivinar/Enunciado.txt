Ejercicio. Adivina el número.
? Crear una nueva aplicación VCL escogiendo del menú: File - New – VCL Form Applicaton C++ Builder.
? En el formulario nuevo, desde la Tool palette, añade los siguientes
Ingredientes:
2 Labels - 1 Edit - 1 Button
Preparación:
Creamos 2 variables públicas: Bueno: integer y Intentos: integer:
#include <vcl.h>
#pragma hdrstop
#include "Unit1.h"
#pragma package(smart_init)
#pragma resource "*.dfm"
TForm1 *Form1;
int bueno, intentos; // -> declaramos dos variables numéricas enteras públicas
Cocción:
Al crearse el formulario se genera un número aleatorio del 1 al 100 y se guarda en la variable bueno:
void __fastcall TForm1::FormCreate(TObject *Sender)
{
randomize; //baraja
bueno=random(100); //crea un num aleatorio entre 0 y 100 y lo guarda en la variable bueno
intentos=0; //pone intentos a cero
}
Acciones: Al pulsar el botón, se crea una variable numerousuario y se evalúa si la variable es igual o mayor a
la variable bueno:
void __fastcall TForm1::Button1Click(TObject *Sender)
{
int numerousuario; //declaramos una variable numérica entera privada válida sólo para esta función
numerousuario = StrToInt(Edit1->Text); //pasa valor de texto a numérico y lo guarda en la variable
if (numerousuario==bueno) {
ShowMessage("Acertaste");
}
else
{
ShowMessage("Fallaste, el número era el " + IntToStr(bueno));
}}
Mejoras:
Mejora 1a: Consigue que el programa te informe si el número introducido es mayor o menor
void __fastcall TForm1::Button1Click(TObject *Sender)
{
int numerousuario;
numerousuario = StrToInt(Edit1->Text);
if (numerousuario==bueno) {
ShowMessage("Acertaste");
}
else
{
if (numerousuario>bueno) {
ShowMessage("Fallaste, el número es más pequeño");
}
else
{
ShowMessage("Fallaste, el número es más grande");
}
}}
Mejora 2a:
? Añadir una barra de progreso: progressbar1 (paleta win32) Progressbar: Max: 60 Position: 60
? Añadir un Temporizador: Timer (paleta system) Interval: 1000 (Repetirá el evento cada 1 segundo)
En el evento del timer OnTimer añadir el código para evaluar el tiempo tardado en acertar y decrementar la barra de
progreso. if (ProgressBar1->Position=0) {Showmessage('Se acabó el tiempo'); Timer1->enabled:=false;}
Mejora 3a:
Al pulsar la tecla Enter en el Edit1 (Edit1KeyPress), llama a la función Button1Click:
if (Key==13) Button1Click(Sender);
Guardar: Guarda la aplicación (Save all).
La unidad con el nombre: adivinanza1.cpp y el proyecto con el nombre: adivinanza.cproj